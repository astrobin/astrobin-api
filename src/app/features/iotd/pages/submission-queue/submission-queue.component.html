<h1 class="page d-flex justify-content-between">
  <span class="flex-grow-1">
    {{ "Submission queue" | translate }}
  </span>

  <astrobin-refresh-button (click)="refresh()"></astrobin-refresh-button>
</h1>

<ng-container *ngIf="submissionQueue$ | async as submissionQueue">
  <ng-container *ngIf="submissions$ | async as submissions">
    <ng-container *ngIf="submissionQueue?.count > 0; else noEntries">

      <div class="page row no-gutters" ngStickyNav stickyClass="sticky-promotion-slots">
        <div class="col-12">
          <astrobin-promotion-slots
            (slotClick)="scrollToEntry($event)">
          </astrobin-promotion-slots>
        </div>
      </div>

      <ng-container
        [ngTemplateOutlet]="pagination"
        [ngTemplateOutletContext]="{count: submissionQueue.count}">
      </ng-container>

      <astrobin-promotion-entry
        *ngFor="let entry of submissionQueue.results"
        #submissionQueueEntries
        [entry]="entry"
        id="submission-queue-entry-{{entry.pk}}">
      </astrobin-promotion-entry>

      <ng-container
        [ngTemplateOutlet]="pagination"
        [ngTemplateOutletContext]="{count: submissionQueue.count}">
      </ng-container>

    </ng-container>
  </ng-container>
</ng-container>

<ng-template #noEntries>
  <p class="page">
    {{ "The submission queue is currently empty." | translate }}&nbsp;{{ "Please come back later!" | translate }}
  </p>
</ng-template>

<ng-template #pagination let-count="count">
  <ngb-pagination
    *ngIf="paginationService.showPagination(count)"
    (pageChange)="pageChange($event)"
    [(page)]="page"
    [collectionSize]="count">
  </ngb-pagination>
</ng-template>
