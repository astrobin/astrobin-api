<div class="page has-breadcrumb">
  <h1 class="d-flex justify-content-between align-items-center flex-column flex-lg-row gap-1">
    <span class="flex-grow-1 me-lg-3 mb-1 mb-lg-0">{{ title }}</span>

    <span class="d-inline-block mb-0 me-lg-3 pt-0 pb-0" ngbDropdown>
      <button
        [class.loading]="loadingService.loading$ | async"
        class="btn btn-outline-primary mb-0"
        id="region-selector"
        ngbDropdownToggle
      >
        <ng-container *ngIf="!!selectedRegion && selectedRegion !== WORLDWIDE">
          <fa-icon icon="flag"></fa-icon>
          {{ requestCountryLabel }}
        </ng-container>
        <ng-container *ngIf="!selectedRegion || selectedRegion === WORLDWIDE">
          <fa-icon icon="globe"></fa-icon>
          {{ "Worldwide" | translate }}
        </ng-container>
      </button>

      <span aria-labelledby="region-selector" ngbDropdownMenu>
        <button (click)="setRegion(WORLDWIDE)" ngbDropdownItem>
          <fa-icon icon="globe"></fa-icon>
          {{ "Worldwide" | translate }}
        </button>

        <button (click)="setRegion(requestCountryCode)" *ngIf="!!requestCountryLabel" ngbDropdownItem>
          <fa-icon icon="flag"></fa-icon>
          {{ requestCountryLabel }}
        </button>
      </span>
    </span>

    <astrobin-refresh-button (click)="refresh()" class="d-none d-lg-block"></astrobin-refresh-button>
  </h1>

  <div class="row">
    <div class="col-12 col-md-5 col-lg-3">
      <astrobin-marketplace-sidebar
        (filterChange)="refresh($event)"
        class="d-block mb-3 mb-lg-0"
      ></astrobin-marketplace-sidebar>
    </div>

    <div class="col">
      <astrobin-marketplace-search-bar
        (search)="refresh($event)"
        class="d-block mb-3"
      ></astrobin-marketplace-search-bar>

      <astrobin-marketplace-line-item-cards
        [listings]="listings$ | async"
      ></astrobin-marketplace-line-item-cards>
    </div>
  </div>
</div>
